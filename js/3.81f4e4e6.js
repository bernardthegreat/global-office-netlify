(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"659c":function(t,a,e){},"8b24":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("q-page",[e("div",{staticClass:"row",staticStyle:{"padding-top":"25px"}},[e("div",{staticClass:"col-12"},[e("booking")],1)])])],1)},s=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-xs-12 q-pa-md"},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white",attrs:{align:"center"}},[e("div",{staticClass:"text-h5"},[t._v("\n          HOURLY RENTALS\n        ")])]),e("q-card-section",[e("div",{staticClass:"q-pa-md"},[e("q-input",{attrs:{filled:"",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{mask:"YYYY-MM-DD",options:t.optionFrom},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("Date")])],1)]},proxy:!0}]),model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1)]),e("q-card-actions",{attrs:{align:"center"}},[e("q-btn",{staticClass:"full-width",attrs:{color:"primary",push:""},on:{click:function(a){return t.getHourlyBookings()}}},[t._v("CHECK AVAILABILITY\n          "),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("CHECK AVAILABILITY OF DATE")])],1)],1)],1)],1),e("div",{staticClass:"col-lg-8 col-md-8 col-sm-12 col-xs-12 q-pa-md"},[e("available-slots",{attrs:{date:t.date,showSlots:t.showSlots,showLoading:t.showLoading}})],1)])},r=[],n=(e("e6cf"),e("ded3")),l=e.n(n),c=e("bd4c"),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",{on:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),t.bookNow(a))}}},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white"},[e("div",{staticClass:"text-h5",attrs:{align:"center"}},[t._v("\n          SLOTS\n        ")])]),t.showLoading?e("q-card-section",{staticClass:"q-mt-md"},[e("q-inner-loading",{attrs:{showing:1==t.showLoading}},[e("q-spinner-gears",{attrs:{size:"100px",color:"primary"}})],1)],1):t._e(),e("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",[t.hourlyBookingsTaken.length>0?e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.showSlots,expression:"showSlots"}],staticClass:"q-pa-sm"},[e("div",{staticClass:"row flex flex-center"},[e("div",{staticClass:"col-lg-12 text-h6",attrs:{align:"center"}},[t._v("\n                Taken Slots\n              ")]),t._l(t.hourlyBookingsTaken,(function(a){return e("div",{key:a.id,staticClass:"col-lg-6 flex flex-center"},[e("q-card",{staticClass:"q-ma-sm bg-primary text-white",staticStyle:{width:"160px"}},[e("q-card-section",[e("div",{staticClass:"text-h6",attrs:{align:"center"}},[t._v("\n                      "+t._s(a.book_from)+" - "+t._s(a.book_to)+"\n                    ")])])],1)],1)})),e("div",{staticClass:"col-lg-12 text-h6 q-pt-md",attrs:{align:"center"}},[t._v("\n                Available Slots\n              ")]),t._l(t.hourlyBookingsAvailable,(function(a){return e("div",{key:a.id,staticClass:"col-lg-6 flex flex-center"},[e("q-card",{staticClass:"q-ma-sm bg-secondary text-white",staticStyle:{width:"160px"}},[e("q-card-section",[e("div",{staticClass:"text-h6",attrs:{align:"center"}},[t._v("\n                      "+t._s(a.book_from)+" - "+t._s(a.book_to)+"\n                    ")])])],1)],1)}))],2)]):e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.showSlots,expression:"showSlots"}]},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white",attrs:{align:"center"}},[e("div",{staticClass:"text-h4"},[t._v("\n                  ALL SLOTS ARE AVAILABLE\n                ")])])],1)],1),e("q-card-section",{staticClass:"q-mt-lg q-pa-md"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSlots,expression:"showSlots"}],staticClass:"col-lg-12"},[e("q-separator"),e("q-card-section",{staticClass:"q-pa-md"},[e("div",{staticClass:"flex flex-center"},[e("div",{staticClass:"q-pa-sm"},[e("q-input",{staticStyle:{width:"200px"},attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{"minute-options":t.officeTimeFromMinutes},model:{value:t.timeFrom,callback:function(a){t.timeFrom=a},expression:"timeFrom"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("From Time")])],1)]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{"minute-options":t.officeTimeToMinutes},model:{value:t.timeTo,callback:function(a){t.timeTo=a},expression:"timeTo"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("To Time")])],1)]},proxy:!0}]),model:{value:t.overallTime,callback:function(a){t.overallTime=a},expression:"overallTime"}})],1),e("div",{staticClass:"q-pa-sm"},[e("q-btn",{attrs:{color:"primary",push:"",disable:t.disableButton},on:{click:t.bookNow}},[t._v("\n                      BOOK\n                      "),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("BOOK HOURLY RENTALS")])],1)],1)])]),e("q-card-actions",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.displayError,expression:"displayError"}],staticClass:"q-pt-sm",staticStyle:{width:"740px"}},[e("q-banner",{staticClass:"text-white bg-red",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}])},[t._v("\n                    "+t._s(t.timeError)+"\n                  ")])],1)])],1)])],1)]),e("vue-recaptcha",{attrs:{sitekey:"6LfXAtYZAAAAAOLvN_WeE3cILHNjb4xVjt4M86kO",loadRecaptchaScript:!0}},[e("button",{staticClass:"hidden"})])],1)],1),e("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.paypalDialog,callback:function(a){t.paypalDialog=a},expression:"paypalDialog"}},[e("paypal-buttons",{attrs:{paypalDialog:t.paypalDialog}})],1)],1)},p=[],m=e("2f62"),u=e("e096"),h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"paypalButtons",staticClass:"q-mt-md paypal-buttons"},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white",attrs:{align:"center"}},[e("div",{staticClass:"text-h5"},[t._v("\n        ORDER SUMMARY\n      ")])]),e("q-card-section",[e("table",{staticStyle:{"border-collapse":"collapse","text-align":"center"},attrs:{id:"table-order",width:"100%"}},[e("thead",[e("tr",[e("th",[t._v("Item Name")]),e("th",[t._v("Cost / Quantity")]),e("th",[t._v("Order Cost")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.orderSummary.name))]),e("td",[t._v(t._s(t.orderSummary.itemCostQty))]),e("td",[t._v(t._s(t.orderSummary.orderCost))])]),e("tr",[e("td",[t._v("Tax (5%)")]),e("td",[t._v(" -- ")]),e("td",[t._v(t._s(t.orderSummary.taxCost))])]),e("tr",[e("td",[t._v("TOTAL")]),e("td",[t._v("--")]),e("td",[t._v(t._s(t.orderSummary.totalCost))])])])])]),e("q-card-section",{attrs:{align:"center",id:"try"}},[e("div",{staticClass:"q-mt-md paypal-buttons-gana",attrs:{id:"paypal-button-container"}})]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{push:"",color:"primary",label:"CLOSE"}})],1)],1)],1)},v=[],y=(e("5319"),[]);function b(t){paypal.Buttons({style:{shape:"rect",color:"gold",layout:"vertical",label:"paypal"},createOrder:function(a,e){return e.order.create({purchase_units:[{description:`${t.name} (${t.bookingDate} | ${t.bookingTime})`,amount:{currency_code:"CAD",value:t.totalCost.replace("$",""),breakdown:{item_total:{currency_code:"CAD",value:t.orderCost.replace("$","")},shipping:{currency_code:"CAD",value:0},tax_total:{currency_code:"CAD",value:t.taxCost.replace("$","")}}},items:[{name:t.name+" ("+t.durationInMinutes+" hour/s)",unit_amount:{currency_code:"CAD",value:t.orderCost.replace("$","")},quantity:1}]}]})},onApprove:function(a,e){return e.order.capture().then((async function(a){const e=t.bookingTime.split(" - ");var o={name:`${a.payer.name.given_name} ${a.payer.name.surname}`,emailAddress:a.payer.email_address,bookingDate:t.bookingDate,bookFrom:e[0],bookTo:e[1]};y.push(o)}))},onError:function(t){console.log("Payment Failed"),console.log(t)}}).render("#paypal-button-container")}var g={props:["paypalDialog"],data(){return{paymentSuccess:!1,paymentStatus:"",paymentDetails:y}},mounted(){this.paypalDialog&&b(this.orderSummary)},computed:l()({},Object(m["b"])(["orderSummary","paymentStatusSuccess"])),watch:{async paymentDetails(t){t.length>0&&await this.$store.dispatch("processPayment",t[0])},paymentStatusSuccess(t){t&&this.$router.push("thank-you")}}},C=g,f=(e("c16e"),e("2877")),w=e("f09f"),_=e("a370"),k=e("4b7e"),x=e("9c40"),S=e("7f67"),q=e("eebe"),T=e.n(q),A=Object(f["a"])(C,h,v,!1,null,null,null),E=A.exports;T()(A,"components",{QCard:w["a"],QCardSection:_["a"],QCardActions:k["a"],QBtn:x["a"]}),T()(A,"directives",{ClosePopup:S["a"]});var D={components:{VueRecaptcha:u["a"],PaypalButtons:E},props:["date","showSlots","showLoading"],computed:l()({},Object(m["b"])(["hourlyBookingsAvailable","hourlyBookingsTaken","hourlyRateCost"])),data(){return{timeFrom:"00:00",timeTo:"00:30",overallTime:"",disableButton:!1,displayError:!1,officeTimeFromMinutes:[0,30],officeTimeToMinutes:[0,30],timeError:"",showPaypalButtons:!1,taxRate:5,bookingSummary:{name:"Hourly Rental",itemCostQty:"",durationInMinutes:"",orderCost:"",taxCost:"",totalCost:"",bookingDate:"",bookingTime:""},paypalDialog:!1,persistent:!1}},watch:{timeTo(t){const a=this.overallTime.split(" - ");this.overallTime=`${a[0]} - ${t}`},timeFrom(t){const a=this.overallTime.split(" - ");this.overallTime=`${t} - ${a[1]}`},async overallTime(t){this.validateTime(),await this.$store.dispatch("setOverallTime",this.overallTime)},showLoading(t){t&&(this.disableButton=!1,this.displayError=!1,this.timeError="")}},mounted(){this.overallTime=`${this.timeFrom} - ${this.timeTo}`},methods:{bookNow(){this.showPaypalButtons=!0,this.validateTime(),this.showPaypalButtons&&(this.paypalDialog=!0,this.$store.dispatch("getOrderSummary",this.bookingSummary))},validateTime(){var t=this.overallTime.split(" - ");const a=`${this.date} ${t[0]}`,e=new Date(a),o=`${this.date} ${t[1]}`,s=new Date(o),i=Math.floor((s-e)/1e3),r=Math.floor(i/60);if(r>=30&&r<=360){this.disableButton=!1,this.displayError=!1;var n=t[0].split(":"),l=60*n[0]+1*n[1],c=t[1].split(":"),d=60*c[0]+1*c[1];this.hourlyBookingsTaken.forEach((a=>{const e=a.book_from.split(":");var o=60*e[0]+1*e[1];const s=a.book_to.split(":");var i=60*s[0]+1*s[1];const r=t[0],n=t[1];a.book_from>a.book_to&&(a.book_from+=0),(l>=o&&d<=i||d>=i&&l<=o)&&(this.disableButton=!0,this.displayError=!0,this.showPaypalButtons=!1,this.timeError=`${r} - ${n} CONFLICTS WITH ANOTHER SLOT. PLEASE SELECT ANOTHER TIME`)}));const a=r/60;if(a>0&&a<6.5){const t=a*this.hourlyRateCost,e=t*(this.taxRate/100),o=t+e;this.bookingSummary.itemCostQty=`$${this.hourlyRateCost} x ${a.toFixed(2)}`,this.bookingSummary.orderCost=`$${t.toFixed(2)}`,this.bookingSummary.taxCost=`$${e.toFixed(2)}`,this.bookingSummary.totalCost=`$${o.toFixed(2)}`,this.bookingSummary.bookingDate=this.date,this.bookingSummary.bookingTime=this.overallTime,this.bookingSummary.durationInMinutes=a}}else this.disableButton=!0,this.displayError=!0,this.timeError="PLEASE ENTER A VALID TIME. MINIMUM OF 30 MINS. AND MAXIMUM OF 6 HOURS"}}},$=D,L=(e("b597"),e("74f7")),O=e("cf57"),B=e("eb85"),Q=e("27f9"),I=e("0016"),M=e("7cbe"),N=e("ca78"),F=e("05c0"),R=e("54e1"),P=e("24e8"),Y=Object(f["a"])($,d,p,!1,null,"45f04747",null),H=Y.exports;T()(Y,"components",{QCard:w["a"],QCardSection:_["a"],QInnerLoading:L["a"],QSpinnerGears:O["a"],QSeparator:B["a"],QInput:Q["a"],QIcon:I["a"],QPopupProxy:M["a"],QTime:N["a"],QBtn:x["a"],QTooltip:F["a"],QCardActions:k["a"],QBanner:R["a"],QDialog:P["a"]}),T()(Y,"directives",{ClosePopup:S["a"]});var j={components:{AvailableSlots:H},data(){return{date:"",showLoading:!1,showSlots:!1}},computed:l()({},Object(m["b"])(["loading","overallTime"])),created(){this.formatDates()},methods:{optionFrom(t){return t>=c["b"].formatDate(Date.now(),"YYYY/MM/DD")},formatDates(){const t=(new Date).toISOString().substring(0,10);this.date=t},async getHourlyBookings(){this.showLoading=!0,this.showSlots=!1,await this.$store.dispatch("getHourlyBookings",this.date),setTimeout((()=>{this.showLoading=!1,this.showSlots=!0}),2e3)}}},U=j,V=e("52ee"),K=Object(f["a"])(U,i,r,!1,null,null,null),J=K.exports;T()(K,"components",{QCard:w["a"],QCardSection:_["a"],QInput:Q["a"],QIcon:I["a"],QPopupProxy:M["a"],QDate:V["a"],QBtn:x["a"],QTooltip:F["a"],QCardActions:k["a"]}),T()(K,"directives",{ClosePopup:S["a"]});var W={components:{Booking:J},name:"PageIndex"},X=W,z=e("9989"),G=Object(f["a"])(X,o,s,!1,null,null,null);a["default"]=G.exports;T()(G,"components",{QPage:z["a"]})},"9eee":function(t,a,e){},b597:function(t,a,e){"use strict";e("659c")},c16e:function(t,a,e){"use strict";e("9eee")}}]);