(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"2d31":function(t,a,e){"use strict";e("cf85")},"8b24":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("q-page",[e("div",{staticClass:"row",staticStyle:{"padding-top":"25px"}},[e("div",{staticClass:"col-12"},[e("booking")],1)])])],1)},s=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4 col-sm-12 col-xs-12 q-pa-md"},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white",attrs:{align:"center"}},[e("div",{staticClass:"text-h5"},[t._v("\n          HOURLY RENTALS\n        ")])]),e("q-card-section",[e("div",{staticClass:"q-pa-md"},[e("q-input",{attrs:{filled:"",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{mask:"YYYY-MM-DD",options:t.optionFrom},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("Date")])],1)]},proxy:!0}]),model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1)]),e("q-card-actions",{attrs:{align:"center"}},[e("q-btn",{staticClass:"full-width",attrs:{color:"primary",push:""},on:{click:function(a){return t.getHourlyBookings()}}},[t._v("CHECK AVAILABILITY\n          "),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("CHECK AVAILABILITY OF DATE")])],1)],1)],1)],1),e("div",{staticClass:"col-lg-8 col-sm-12 col-xs-12 q-pa-md"},[e("available-slots",{attrs:{date:t.date,showSlots:t.showSlots,showLoading:t.showLoading}}),e("paypal-buttons",{directives:[{name:"show",rawName:"v-show",value:t.paypalBreakdownVisibility,expression:"paypalBreakdownVisibility"}]})],1)])},r=[],n=(e("e6cf"),e("ded3")),l=e.n(n),c=e("bd4c"),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",{on:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),t.bookNow(a))}}},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white"},[e("div",{staticClass:"text-h5",attrs:{align:"center"}},[t._v("\n          SLOTS\n        ")])]),e("q-card-section",[e("div",{staticClass:"text-h5",attrs:{align:"center"}},[t._v("\n          AVAILABLE AND TAKEN SLOTS FOR HOURLY RENTALS\n        ")])]),t.showLoading?e("q-card-section",{staticClass:"q-mt-md"},[e("q-inner-loading",{attrs:{showing:1==t.showLoading}},[e("q-spinner-gears",{attrs:{size:"100px",color:"primary"}})],1)],1):t._e(),e("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",[t.hourlyBookingsTaken.length>0?e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.showSlots,expression:"showSlots"}],staticClass:"q-pa-sm"},[e("div",{staticClass:"row flex flex-center"},[e("div",{staticClass:"col-lg-12 text-h6",attrs:{align:"center"}},[t._v("\n                Taken Slots\n              ")]),t._l(t.hourlyBookingsTaken,(function(a){return e("div",{key:a.id,staticClass:"col-lg-6 flex flex-center"},[e("q-card",{staticClass:"q-ma-sm bg-primary text-white",staticStyle:{width:"160px"}},[e("q-card-section",[e("div",{staticClass:"text-h6",attrs:{align:"center"}},[t._v("\n                      "+t._s(a.book_from)+" - "+t._s(a.book_to)+"\n                    ")])])],1)],1)})),e("div",{staticClass:"col-lg-12 text-h6 q-pt-md",attrs:{align:"center"}},[t._v("\n                Available Slots\n              ")]),t._l(t.hourlyBookingsAvailable,(function(a){return e("div",{key:a.id,staticClass:"col-lg-6 flex flex-center"},[e("q-card",{staticClass:"q-ma-sm bg-secondary text-white",staticStyle:{width:"160px"}},[e("q-card-section",[e("div",{staticClass:"text-h6",attrs:{align:"center"}},[t._v("\n                      "+t._s(a.book_from)+" - "+t._s(a.book_to)+"\n                    ")])])],1)],1)}))],2)]):e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.showSlots,expression:"showSlots"}]},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white",attrs:{align:"center"}},[e("div",{staticClass:"text-h4"},[t._v("\n                  ALL SLOTS ARE AVAILABLE\n                ")])])],1)],1),e("q-card-section",{staticClass:"q-mt-lg q-pa-md"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSlots,expression:"showSlots"}],staticClass:"col-lg-12"},[e("q-separator"),e("q-card-section",{staticClass:"q-pa-md"},[e("div",{staticClass:"flex flex-center"},[e("div",{staticClass:"q-pa-sm"},[e("q-input",{staticStyle:{width:"200px"},attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{"minute-options":t.officeTimeFromMinutes},model:{value:t.timeFrom,callback:function(a){t.timeFrom=a},expression:"timeFrom"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("From Time")])],1)]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{"minute-options":t.officeTimeToMinutes},model:{value:t.timeTo,callback:function(a){t.timeTo=a},expression:"timeTo"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("To Time")])],1)]},proxy:!0}]),model:{value:t.overallTime,callback:function(a){t.overallTime=a},expression:"overallTime"}})],1),e("div",{staticClass:"q-pa-sm"},[e("q-btn",{attrs:{color:"primary",push:"",disable:t.disableButton},on:{click:t.bookNow}},[t._v("\n                      BOOK\n                      "),e("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("BOOK HOURLY RENTALS")])],1)],1)])]),e("q-card-actions",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.displayError,expression:"displayError"}],staticClass:"q-pt-sm",staticStyle:{width:"740px"}},[e("q-banner",{staticClass:"text-white bg-red",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"avatar",fn:function(){return[e("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}])},[t._v("\n                    "+t._s(t.timeError)+"\n                  ")])],1)])],1)])],1)]),e("vue-recaptcha",{attrs:{sitekey:"6LfXAtYZAAAAAOLvN_WeE3cILHNjb4xVjt4M86kO",loadRecaptchaScript:!0}},[e("button",{staticClass:"hidden"})])],1)],1)])},p=[],m=e("2f62"),u=e("e096"),h={components:{VueRecaptcha:u["a"]},props:["date","showSlots","showLoading"],computed:l()({},Object(m["b"])(["hourlyBookingsAvailable","hourlyBookingsTaken","hourlyRateCost"])),data(){return{timeFrom:"00:00",timeTo:"00:30",overallTime:"",disableButton:!1,displayError:!1,officeTimeFromMinutes:[0,30],officeTimeToMinutes:[0,30],timeError:"",showPaypalButtons:!1,taxRate:5,bookingSummary:{name:"Hourly Rental",itemCostQty:"",durationInMinutes:"",orderCost:"",taxCost:"",totalCost:"",bookingDate:"",bookingTime:""}}},watch:{timeTo(t){const a=this.overallTime.split(" - ");this.overallTime=`${a[0]} - ${t}`},timeFrom(t){const a=this.overallTime.split(" - ");this.overallTime=`${t} - ${a[1]}`},async overallTime(t){this.validateTime(),await this.$store.dispatch("setOverallTime",this.overallTime)},showLoading(t){t&&(this.disableButton=!1,this.displayError=!1,this.timeError="")}},mounted(){this.overallTime=`${this.timeFrom} - ${this.timeTo}`},methods:{bookNow(){this.showPaypalButtons=!0,this.validateTime(),this.showPaypalButtons&&(this.$store.dispatch("displayPaypalBreakdown",!0),this.$store.dispatch("getOrderSummary",this.bookingSummary))},validateTime(){var t=this.overallTime.split(" - ");const a=`${this.date} ${t[0]}`,e=new Date(a),o=`${this.date} ${t[1]}`,s=new Date(o),i=Math.floor((s-e)/1e3),r=Math.floor(i/60);if(r>=30&&r<=360){this.disableButton=!1,this.displayError=!1;var n=t[0].split(":"),l=60*n[0]+1*n[1],c=t[1].split(":"),d=60*c[0]+1*c[1];this.hourlyBookingsTaken.forEach((a=>{const e=a.book_from.split(":");var o=60*e[0]+1*e[1];const s=a.book_to.split(":");var i=60*s[0]+1*s[1];const r=t[0],n=t[1];a.book_from>a.book_to&&(a.book_from+=0),(l>=o&&d<=i||d>=i&&l<=o)&&(this.disableButton=!0,this.displayError=!0,this.showPaypalButtons=!1,this.timeError=`${r} - ${n} CONFLICTS WITH ANOTHER SLOT. PLEASE SELECT ANOTHER TIME`)}));const a=r/60;if(a>0&&a<6.5){const t=a*this.hourlyRateCost,e=t*(this.taxRate/100),o=t+e;this.bookingSummary.itemCostQty=`$${this.hourlyRateCost} x ${a.toFixed(2)}`,this.bookingSummary.orderCost=`$${t.toFixed(2)}`,this.bookingSummary.taxCost=`$${e.toFixed(2)}`,this.bookingSummary.totalCost=`$${o.toFixed(2)}`,this.bookingSummary.bookingDate=this.date,this.bookingSummary.bookingTime=this.overallTime,this.bookingSummary.durationInMinutes=a}}else this.disableButton=!0,this.displayError=!0,this.timeError="PLEASE ENTER A VALID TIME. MINIMUM OF 30 MINS. AND MAXIMUM OF 6 HOURS"}}},y=h,v=(e("2d31"),e("2877")),b=e("f09f"),w=e("a370"),g=e("74f7"),C=e("cf57"),f=e("eb85"),k=e("27f9"),_=e("0016"),x=e("7cbe"),S=e("ca78"),T=e("9c40"),q=e("05c0"),A=e("4b7e"),E=e("54e1"),$=e("7f67"),B=e("eebe"),L=e.n(B),O=Object(v["a"])(y,d,p,!1,null,"7dd049d8",null),D=O.exports;L()(O,"components",{QCard:b["a"],QCardSection:w["a"],QInnerLoading:g["a"],QSpinnerGears:C["a"],QSeparator:f["a"],QInput:k["a"],QIcon:_["a"],QPopupProxy:x["a"],QTime:S["a"],QBtn:T["a"],QTooltip:q["a"],QCardActions:A["a"],QBanner:E["a"]}),L()(O,"directives",{ClosePopup:$["a"]});var I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"q-mt-md"},[e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white",attrs:{align:"center"}},[e("div",{staticClass:"text-h5"},[t._v("\n          ORDER SUMMARY\n        ")])]),e("q-card-section",[e("table",{staticStyle:{"border-collapse":"collapse","text-align":"center"},attrs:{id:"table-order",width:"100%"}},[e("thead",[e("tr",[e("th",[t._v("Item Name")]),e("th",[t._v("Cost / Quantity")]),e("th",[t._v("Order Cost")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.orderSummary.name))]),e("td",[t._v(t._s(t.orderSummary.itemCostQty))]),e("td",[t._v(t._s(t.orderSummary.orderCost))])]),e("tr",[e("td",[t._v("Tax (5%)")]),e("td",[t._v(" -- ")]),e("td",[t._v(t._s(t.orderSummary.taxCost))])]),e("tr",[e("td",[t._v("TOTAL")]),e("td",[t._v("--")]),e("td",[t._v(t._s(t.orderSummary.totalCost))])])])])]),e("q-card-section",[e("div",{staticClass:"q-mt-md",attrs:{id:"paypal-button-container"}})])],1)],1)])},Q=[],N=(e("5319"),[]);function M(t){paypal.Buttons({style:{shape:"rect",color:"gold",layout:"vertical",label:"paypal"},createOrder:function(a,e){return e.order.create({purchase_units:[{description:`${t.name} (${t.bookingDate} | ${t.bookingTime})`,amount:{currency_code:"CAD",value:t.totalCost.replace("$",""),breakdown:{item_total:{currency_code:"CAD",value:t.orderCost.replace("$","")},shipping:{currency_code:"CAD",value:0},tax_total:{currency_code:"CAD",value:t.taxCost.replace("$","")}}},items:[{name:t.name+" ("+t.durationInMinutes/60+" hour/s)",unit_amount:{currency_code:"CAD",value:t.orderCost.replace("$","")},quantity:1}]}]})},onApprove:function(a,e){return e.order.capture().then((async function(a){const e=t.bookingTime.split(" - ");var o={name:`${a.payer.name.given_name} ${a.payer.name.surname}`,emailAddress:a.payer.email_address,bookingDate:t.bookingDate,bookFrom:e[0],bookTo:e[1]};N.push(o)}))},onError:function(t){console.log("paymentfailed"),console.log(t)}}).render("#paypal-button-container")}var R={data(){return{paymentSuccess:!1,paymentStatus:"",paymentDetails:N,dialogPaypal:!1}},mounted(){},computed:l()({},Object(m["b"])(["orderSummary","paypalBreakdownVisibility","paymentStatusSuccess","paypalDialog"])),watch:{paypalBreakdownVisibility(t){t&&this.paypal()},async paymentDetails(t){t.length>0&&await this.$store.dispatch("processPayment",t[0])},paymentStatusSuccess(t){t&&this.$router.push("thank-you")},paypalDialog(t){t&&(this.dialogPaypal=!0)}},methods:{paypal(){this.paypalBreakdownVisibility&&this.paypalDialog&&M(this.orderSummary)},async closePaypalDialog(){this.dialogPaypal=!1,await this.$store.dispatch("paypalDialog",!1)}}},P=R,F=(e("c16e"),Object(v["a"])(P,I,Q,!1,null,null,null)),Y=F.exports;L()(F,"components",{QCard:b["a"],QCardSection:w["a"]});var H={components:{AvailableSlots:D,PaypalButtons:Y},data(){return{date:"",showLoading:!1,showSlots:!1}},computed:l()({},Object(m["b"])(["loading","paypalBreakdownVisibility","overallTime"])),watch:{overallTime(t){this.$store.dispatch("displayPaypalBreakdown",!1)}},created(){this.formatDates()},methods:{optionFrom(t){return t>=c["b"].formatDate(Date.now(),"YYYY/MM/DD")},formatDates(){const t=(new Date).toISOString().substring(0,10);this.date=t},async getHourlyBookings(){this.showLoading=!0,this.showSlots=!1,await this.$store.dispatch("getHourlyBookings",this.date),setTimeout((()=>{this.showLoading=!1,this.showSlots=!0}),2e3)}}},V=H,j=e("52ee"),U=Object(v["a"])(V,i,r,!1,null,null,null),K=U.exports;L()(U,"components",{QCard:b["a"],QCardSection:w["a"],QInput:k["a"],QIcon:_["a"],QPopupProxy:x["a"],QDate:j["a"],QBtn:T["a"],QTooltip:q["a"],QCardActions:A["a"]}),L()(U,"directives",{ClosePopup:$["a"]});var J={components:{Booking:K},name:"PageIndex"},W=J,X=e("9989"),z=Object(v["a"])(W,o,s,!1,null,null,null);a["default"]=z.exports;L()(z,"components",{QPage:X["a"]})},"9eee":function(t,a,e){},c16e:function(t,a,e){"use strict";e("9eee")},cf85:function(t,a,e){}}]);